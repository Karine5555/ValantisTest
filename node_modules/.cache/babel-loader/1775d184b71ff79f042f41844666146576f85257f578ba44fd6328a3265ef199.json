{"ast":null,"code":"import moment from'moment';var md5=require('js-md5');export const BASE_URL='http://api.valantis.store:40000';export default{filterProducts:async(params,filters)=>{let needFilter=false;Object.values(filters).map(item=>{if(item){needFilter=true;}return item;});const response=await fetch(BASE_URL,{method:'POST',headers:{'X-Auth':md5(\"Valantis_\".concat(moment().format('yyyyMMDD'))),'Content-Type':'application/json'},body:JSON.stringify({\"action\":needFilter?\"filter\":\"get_ids\",\"params\":needFilter?filters:params})});const{result}=await response.json();const res=await fetch(BASE_URL,{method:'POST',headers:{'X-Auth':md5(\"Valantis_\".concat(moment().format('yyyyMMDD'))),'Content-Type':'application/json'},body:JSON.stringify({\"action\":\"get_items\",\"params\":{\"ids\":result}})});return await res.json();}};","map":{"version":3,"names":["moment","md5","require","BASE_URL","filterProducts","params","filters","needFilter","Object","values","map","item","response","fetch","method","headers","concat","format","body","JSON","stringify","result","json","res"],"sources":["/Users/karina/Desktop/ValantisTest/src/api.service.js"],"sourcesContent":["import moment from 'moment';\nvar md5 = require('js-md5');\n\nexport const BASE_URL = 'http://api.valantis.store:40000';\n\nexport default {\n    filterProducts: async (params, filters) => {\n        let needFilter = false;\n        Object.values(filters).map((item) => {\n            if(item) {\n                needFilter = true\n            }\n            return item;\n        });\n        const response = await fetch(BASE_URL, {\n            method: 'POST',\n            headers: {\n                'X-Auth': md5(`Valantis_${moment().format('yyyyMMDD')}`),\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                \"action\": needFilter ? \"filter\" : \"get_ids\",\n                \"params\": needFilter ? filters : params\n            }),\n        });\n\n        const {result} = await response.json()\n\n        const res = await fetch(BASE_URL, {\n            method: 'POST',\n            headers: {\n                'X-Auth': md5(`Valantis_${moment().format('yyyyMMDD')}`),\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                \"action\": \"get_items\",\n                \"params\": {\"ids\": result}\n            }),\n        });\n\n        return await res.json();\n\n    }\n}"],"mappings":"AAAA,MAAO,CAAAA,MAAM,KAAM,QAAQ,CAC3B,GAAI,CAAAC,GAAG,CAAGC,OAAO,CAAC,QAAQ,CAAC,CAE3B,MAAO,MAAM,CAAAC,QAAQ,CAAG,iCAAiC,CAEzD,cAAe,CACXC,cAAc,CAAE,KAAAA,CAAOC,MAAM,CAAEC,OAAO,GAAK,CACvC,GAAI,CAAAC,UAAU,CAAG,KAAK,CACtBC,MAAM,CAACC,MAAM,CAACH,OAAO,CAAC,CAACI,GAAG,CAAEC,IAAI,EAAK,CACjC,GAAGA,IAAI,CAAE,CACLJ,UAAU,CAAG,IAAI,CACrB,CACA,MAAO,CAAAI,IAAI,CACf,CAAC,CAAC,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACV,QAAQ,CAAE,CACnCW,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,QAAQ,CAAEd,GAAG,aAAAe,MAAA,CAAahB,MAAM,CAAC,CAAC,CAACiB,MAAM,CAAC,UAAU,CAAC,CAAE,CAAC,CACxD,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjB,QAAQ,CAAEb,UAAU,CAAG,QAAQ,CAAG,SAAS,CAC3C,QAAQ,CAAEA,UAAU,CAAGD,OAAO,CAAGD,MACrC,CAAC,CACL,CAAC,CAAC,CAEF,KAAM,CAACgB,MAAM,CAAC,CAAG,KAAM,CAAAT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAEtC,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAV,KAAK,CAACV,QAAQ,CAAE,CAC9BW,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,QAAQ,CAAEd,GAAG,aAAAe,MAAA,CAAahB,MAAM,CAAC,CAAC,CAACiB,MAAM,CAAC,UAAU,CAAC,CAAE,CAAC,CACxD,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjB,QAAQ,CAAE,WAAW,CACrB,QAAQ,CAAE,CAAC,KAAK,CAAEC,MAAM,CAC5B,CAAC,CACL,CAAC,CAAC,CAEF,MAAO,MAAM,CAAAE,GAAG,CAACD,IAAI,CAAC,CAAC,CAE3B,CACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}